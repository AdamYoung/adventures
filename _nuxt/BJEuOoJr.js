import{m as g,S as k,r as x,n as w,o as h,c as f,F as A,p as P,t as S,q as b,a as $,b as B,u as E,s as M}from"./pGoZOnRg.js";import{_ as C}from"./DlAUqK2U.js";const N={__name:"machine-gun",props:{text:{type:String,default:""},maxLength:{type:Number,default:12},speed:{type:Number,default:4},loop:{type:Boolean,default:!1},repeat:{type:Number,default:0},onComplete:{type:Function,default:()=>{}}},setup(y){g.registerPlugin(k);const o=y,d=x(null),c=x([]);(o.speed<1||o.speed>10)&&(o.speed=5),o.loop&&(o.repeat=-1);const p=.05+(10-o.speed)*(.4-.05)/9,u=/(\.|\?|!)$/g,m=(e,i)=>{if(typeof i>"u")return e.split(" ");const t=e.split(" "),a=t.length;let s=[];const r=[];for(let l=0;l<a;l++)s.push(t[l]),(u.test(t[l])||l===a-1||s.join(" ").length+t[l+1].length>i)&&(r.push(s.join(" ")),s=[]);return r},_=async()=>{const e=m(o.text,o.maxlength);console.log(e);for(let n=0;n<e.length;n++)c.value.push({text:e[n],id:n}),console.log(e[n]);await b();const i=g.timeline({delay:.6,repeat:o.repeat,repeatDelay:4,onComplete:o.onComplete});let t=0,a,s,r,l;for(let n=0;n<c.value.length;n++)a=c.value[n],console.log(a),l=u.test(a.text)||n===c.value.length-1,s=d.value.children[n],r=Math.max(.5,a.text.length*p),l&&(r+=.6),g.set(s,{autoAlpha:0,scale:0,z:.01}),i.to(s,{duration:r,scale:1.2,ease:"slow(0.25, 0.9)"},t).to(s,{duration:r,autoAlpha:1,ease:"slow(0.25, 0.9, true)"},t),t+=r-.05};return w(()=>{_()}),(e,i)=>(h(),f("div",{ref_key:"demo",ref:d,class:"textContainer"},[(h(!0),f(A,null,P(c.value,(t,a)=>(h(),f("h3",{key:a,class:"textChunk"},S(t.text),1))),128))],512))}},I=C(N,[["__scopeId","data-v-ceb0555f"]]),L={class:"home"},v=6,T=2.5,D={__name:"index",setup(y){const o=E(),d=async()=>{const e=Array.from({length:v},(i,t)=>o.preloadSingle({type:"image",src:`/page${t+1}.png`}));await Promise.all(e),console.log("All images loaded"),u()},c=e=>[{type:"audio",src:`/page${e}.mp3`},{type:"video",src:`/page${e}.mp4`}];let p=1;const u=()=>{p<=v&&o.queueBatch(c(p),()=>{console.log(`Page ${p} media loaded`),p++,u()})};d();const m=x(null),_=()=>{g.to(m.value,{height:0,opacity:0,duration:T,onComplete:()=>M("/shapes")})};return(e,i)=>{const t=I;return h(),f("div",L,[$("div",{ref_key:"textContainer",ref:m,class:"text-container"},[B(t,{text:"A world of wonder awaits. Get ready for the epic adventures of Mya and Khita!",speed:6,loop:!1,repeat:0,"max-length":50,"on-complete":_})],512)])}}},q=C(D,[["__scopeId","data-v-5181f5a7"]]);export{q as default};
